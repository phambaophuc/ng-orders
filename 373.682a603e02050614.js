"use strict";(self.webpackChunkmanage_shop=self.webpackChunkmanage_shop||[]).push([[373],{373:(xt,g,a)=>{a.r(g),a.d(g,{OrderModule:()=>Et});var u=a(6814),C=a(4190),t=a(5879),p=a(3365),m=a(3566),d=a(5313),O=a(5246),s=a(3373),h=function(e){return e.CASH="CASH",e.ONLINE="ONLINE",e}(h||{}),D=a(3601),N=a(872),y=a(4300),_=a(7700),A=a(3942),v=a(4321),T=a(1175),E=a(2296),f=a(4170),Z=a(8525),L=a(3680),x=a(2032);function S(e,o){1&e&&(t.TgZ(0,"th",36),t._uU(1," M\xe3 "),t.qZA())}function U(e,o){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.key," ")}}function Y(e,o){1&e&&(t.TgZ(0,"th",38),t._uU(1," Kh\xe1ch h\xe0ng "),t.qZA())}function B(e,o){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.name," ")}}function I(e,o){1&e&&(t.TgZ(0,"th",36),t._uU(1," S\u0110T "),t.qZA())}function b(e,o){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.phoneNumber," ")}}function k(e,o){1&e&&(t.TgZ(0,"th",36),t._uU(1," \u0110\u1ecba ch\u1ec9 "),t.qZA())}function Q(e,o){if(1&e&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.s9C("title",n.address),t.xp6(1),t.hij(" ",n.address," ")}}function M(e,o){1&e&&(t.TgZ(0,"th",36),t._uU(1," Ng\xe0y \u0111\u1eb7t "),t.qZA())}function q(e,o){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.dateScheduled," ")}}function P(e,o){1&e&&(t.TgZ(0,"th",36),t._uU(1," T/G \u0111\u1eb7t "),t.qZA())}function J(e,o){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.timeScheduled," ")}}function G(e,o){1&e&&(t.TgZ(0,"th",36),t._uU(1," Ph\u01b0\u01a1ng th\u1ee9c giao "),t.qZA())}function H(e,o){if(1&e&&(t.TgZ(0,"td",37),t._UZ(1,"i",40),t._uU(2),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Q6J("ngClass",n.isScheduled?"fas fa-calendar":"fas fa-truck"),t.xp6(1),t.hij(" ",n.isScheduled?"H\u1eb9n tr\u01b0\u1edbc":"Giao ngay"," ")}}function w(e,o){1&e&&(t.TgZ(0,"th",36),t._uU(1," Thanh to\xe1n "),t.qZA())}function F(e,o){if(1&e&&(t.TgZ(0,"td",37),t._UZ(1,"i",41),t._uU(2),t.qZA()),2&e){const n=o.$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngClass",i.getPaymentIcon(n.paymentMethod)),t.xp6(1),t.hij(" ",n.paymentMethod," ")}}function $(e,o){1&e&&(t.TgZ(0,"th",36),t._uU(1," Tr\u1ea1ng th\xe1i "),t.qZA())}function j(e,o){if(1&e&&(t.TgZ(0,"td",37)(1,"span",42),t._UZ(2,"i",41),t._uU(3),t.qZA()()),2&e){const n=o.$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngClass",i.getStatusClass(n.status)),t.xp6(1),t.Q6J("ngClass",i.getStatusIcon(n.status)),t.xp6(1),t.hij(" ",n.status," ")}}function R(e,o){1&e&&(t.TgZ(0,"th",36),t._uU(1," T/G x\xe1c nh\u1eadn "),t.qZA())}function z(e,o){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.acceptedTime?n.acceptedTime:"Ch\u01b0a x\xe1c nh\u1eadn"," ")}}function X(e,o){1&e&&(t.TgZ(0,"th",36),t._uU(1," Ng\xe0y x\xe1c nh\u1eadn "),t.qZA())}function K(e,o){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.acceptedDate?n.acceptedDate:"Ch\u01b0a x\xe1c nh\u1eadn"," ")}}function V(e,o){1&e&&(t.TgZ(0,"th",43),t._uU(1,"X\xe1c nh\u1eadn"),t.qZA())}function W(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"button",47),t.NdJ("click",function(){t.CHM(n);const r=t.oxw().$implicit,c=t.oxw();return t.KtG(c.acceptOrder(r))}),t.TgZ(1,"mat-icon"),t._uU(2,"done"),t.qZA()()}}function tt(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(){t.CHM(n);const r=t.oxw().$implicit,c=t.oxw();return t.KtG(c.deliveringOrder(r))}),t.TgZ(1,"mat-icon"),t._uU(2,"local_shipping"),t.qZA()()}}function et(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"button",49),t.NdJ("click",function(){t.CHM(n);const r=t.oxw().$implicit,c=t.oxw();return t.KtG(c.deniedOrder(r))}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}const nt=function(){return["denied","completed"]};function ot(e,o){if(1&e&&(t.TgZ(0,"td",37),t.YNc(1,W,3,0,"button",44),t.YNc(2,tt,3,0,"button",45),t.YNc(3,et,3,0,"button",46),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Q6J("ngIf","pending"===n.status.toLowerCase()),t.xp6(1),t.Q6J("ngIf","accepted"===n.status.toLowerCase()),t.xp6(1),t.Q6J("ngIf",!t.DdM(3,nt).includes(n.status.toLowerCase()))}}function it(e,o){1&e&&(t.TgZ(0,"th",50),t._uU(1,"Chi ti\u1ebft"),t.qZA())}function at(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"td",51)(1,"button",52),t.NdJ("click",function(){const c=t.CHM(n).$implicit,l=t.oxw();return t.KtG(l.openOrderDetails(c))}),t.TgZ(2,"mat-icon"),t._uU(3,"visibility"),t.qZA()()()}}function rt(e,o){1&e&&t._UZ(0,"tr",53)}function ct(e,o){1&e&&t._UZ(0,"tr",54)}const st=function(){return[5,10,20,50]};let dt=(()=>{class e{constructor(n,i,r,c,l,Zt){this.orderService=n,this.authService=i,this._liveAnnouncer=r,this.dialog=c,this.snackbar=l,this.datePipe=Zt,this.displayedColumns=["key","name","phone","address","dateScheduled","timeScheduled","isScheduled","payment","status","acceptedTime","acceptedDate","accept","actions"],this.orders=[],this.isLoading=!1,this.filteredData=[],this.selectedStatus=""}ngOnInit(){this.getOrders()}getOrders(){this.isLoading=!0,this.authService.getCurrentUser().subscribe(n=>{this.orderService.getOrdersByShopId(n.shopId).subscribe(i=>{this.dataSource=new d.by(i),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.isLoading=!1})})}openOrderDetails(n){this.dialog.open(O.o,{data:n})}announceSortChange(n){this._liveAnnouncer.announce(n.direction?`Sorted ${n.direction}ending`:"Sorting cleared")}filterChange(n){this.applyFilter(n.target.value)}selectChange(n){this.selectedStatus=n.value,this.applyFilter(this.selectedStatus)}applyFilter(n=""){this.dataSource.filter=n}acceptOrder(n){n.status=s.q.ACCEPTED;const i=this.datePipe.transform(new Date,"HH:mm"),r=this.datePipe.transform(new Date,"dd/MM/yyyy");n.acceptedTime=i,n.acceptedDate=r,this.orderService.updateOrder(n.key,n).then(()=>{this.snackbar.openSnackBar("\u0110\xe3 x\xe1c nh\u1eadn \u0111\u01a1n h\xe0ng.")}).catch(c=>{console.error(c)})}deniedOrder(n){n.status=s.q.DENIED,this.orderService.updateOrder(n.key,n).then(()=>{this.snackbar.openSnackBar("\u0110\u01a1n h\xe0ng \u0111\xe3 b\u1ecb hu\u1ef7.","DONE")}).catch(i=>{console.error(i)})}deliveringOrder(n){n.status=s.q.DELIVERING,this.orderService.updateOrder(n.key,n).then(()=>{this.snackbar.openSnackBar("\u0110\u01a1n h\xe0ng \u0111\xe3 \u0111\u01b0\u1ee3c giao!","DONE")}).catch(i=>{console.error(i)})}getStatusClass(n){switch(n){case s.q.PENDING:return"text-info";case s.q.ACCEPTED:return"text-primary";case s.q.DENIED:return"text-danger";case s.q.DELIVERING:return"text-warning pulsating-text";case s.q.COMPLETED:return"text-green";default:return""}}getStatusIcon(n){switch(n){case s.q.PENDING:return"fa-hourglass-half rotating-icon";case s.q.ACCEPTED:return"fa-check-circle";case s.q.DENIED:return"fa-times-circle";case s.q.DELIVERING:return"fa-truck";case s.q.COMPLETED:return"fa-check";default:return""}}getPaymentIcon(n){switch(n){case h.CASH:return"fa-money-bill";case h.ONLINE:return"fa-credit-card";default:return""}}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(D.p),t.Y36(N.e),t.Y36(y.Kd),t.Y36(_.uw),t.Y36(A.c),t.Y36(u.uU))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-list-order"]],viewQuery:function(i,r){if(1&i&&(t.Gf(p.NW,5),t.Gf(m.YE,5)),2&i){let c;t.iGM(c=t.CRH())&&(r.paginator=c.first),t.iGM(c=t.CRH())&&(r.sort=c.first)}},decls:65,vars:7,consts:[[1,"mt-4"],[1,"d-flex"],[1,"me-2"],["matInput","","placeholder","Nh\u1eadp d\u1eef li\u1ec7u c\u1ea7n t\xecm ...",3,"keyup"],[3,"selectionChange"],["value","pending"],["value","accepted"],["value","denied"],["value","delivering"],["value","completed"],[1,"table-responsive","mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource","matSortChange"],["matColumnDef","key"],["mat-header-cell","","mat-sort-header","","class","fw-bold",4,"matHeaderCellDef"],["mat-cell","","class","text-truncate",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","","class","fw-bold text-truncate",4,"matHeaderCellDef"],["matColumnDef","phone"],["matColumnDef","address"],["mat-cell","","class","text-truncate",3,"title",4,"matCellDef"],["matColumnDef","dateScheduled"],["matColumnDef","timeScheduled"],["matColumnDef","isScheduled"],["matColumnDef","payment"],["matColumnDef","status"],["matColumnDef","acceptedTime"],["matColumnDef","acceptedDate"],["matColumnDef","accept"],["mat-header-cell","","class","fw-bold",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","fw-bold text-truncate",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSize","pageSizeOptions"],[3,"isLoading"],["mat-header-cell","","mat-sort-header","",1,"fw-bold"],["mat-cell","",1,"text-truncate"],["mat-header-cell","","mat-sort-header","",1,"fw-bold","text-truncate"],["mat-cell","",1,"text-truncate",3,"title"],[1,"me-1",3,"ngClass"],[1,"me-1","fas",3,"ngClass"],[3,"ngClass"],["mat-header-cell","",1,"fw-bold"],["mat-icon-button","","color","primary","title","X\xe1c nh\u1eadn \u0111\u01a1n h\xe0ng",3,"click",4,"ngIf"],["mat-icon-button","","color","primary","title","Giao h\xe0ng",3,"click",4,"ngIf"],["mat-icon-button","","color","warn","title","Hu\u1ef7 \u0111\u01a1n h\xe0ng",3,"click",4,"ngIf"],["mat-icon-button","","color","primary","title","X\xe1c nh\u1eadn \u0111\u01a1n h\xe0ng",3,"click"],["mat-icon-button","","color","primary","title","Giao h\xe0ng",3,"click"],["mat-icon-button","","color","warn","title","Hu\u1ef7 \u0111\u01a1n h\xe0ng",3,"click"],["mat-header-cell","",1,"fw-bold","text-truncate"],["mat-cell",""],["mat-icon-button","","color","primary","title","Xem chi ti\u1ebft \u0111\u01a1n h\xe0ng",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,r){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),t.NdJ("keyup",function(l){return r.filterChange(l)}),t.qZA()(),t.TgZ(4,"mat-form-field")(5,"mat-label"),t._uU(6,"Status"),t.qZA(),t.TgZ(7,"mat-select",4),t.NdJ("selectionChange",function(l){return r.selectChange(l)}),t.TgZ(8,"mat-option"),t._uU(9,"-- None --"),t.qZA(),t.TgZ(10,"mat-option",5),t._uU(11,"PENDING"),t.qZA(),t.TgZ(12,"mat-option",6),t._uU(13,"ACCEPTED"),t.qZA(),t.TgZ(14,"mat-option",7),t._uU(15,"DENIED"),t.qZA(),t.TgZ(16,"mat-option",8),t._uU(17,"DELIVERING"),t.qZA(),t.TgZ(18,"mat-option",9),t._uU(19,"COMPLETED"),t.qZA()()()(),t.TgZ(20,"div",10)(21,"table",11),t.NdJ("matSortChange",function(l){return r.announceSortChange(l)}),t.ynx(22,12),t.YNc(23,S,2,0,"th",13),t.YNc(24,U,2,1,"td",14),t.BQk(),t.ynx(25,15),t.YNc(26,Y,2,0,"th",16),t.YNc(27,B,2,1,"td",14),t.BQk(),t.ynx(28,17),t.YNc(29,I,2,0,"th",13),t.YNc(30,b,2,1,"td",14),t.BQk(),t.ynx(31,18),t.YNc(32,k,2,0,"th",13),t.YNc(33,Q,2,2,"td",19),t.BQk(),t.ynx(34,20),t.YNc(35,M,2,0,"th",13),t.YNc(36,q,2,1,"td",14),t.BQk(),t.ynx(37,21),t.YNc(38,P,2,0,"th",13),t.YNc(39,J,2,1,"td",14),t.BQk(),t.ynx(40,22),t.YNc(41,G,2,0,"th",13),t.YNc(42,H,3,2,"td",14),t.BQk(),t.ynx(43,23),t.YNc(44,w,2,0,"th",13),t.YNc(45,F,3,2,"td",14),t.BQk(),t.ynx(46,24),t.YNc(47,$,2,0,"th",13),t.YNc(48,j,4,3,"td",14),t.BQk(),t.ynx(49,25),t.YNc(50,R,2,0,"th",13),t.YNc(51,z,2,1,"td",14),t.BQk(),t.ynx(52,26),t.YNc(53,X,2,0,"th",13),t.YNc(54,K,2,1,"td",14),t.BQk(),t.ynx(55,27),t.YNc(56,V,2,0,"th",28),t.YNc(57,ot,4,4,"td",14),t.BQk(),t.ynx(58,29),t.YNc(59,it,2,0,"th",30),t.YNc(60,at,4,0,"td",31),t.BQk(),t.YNc(61,rt,1,0,"tr",32),t.YNc(62,ct,1,0,"tr",33),t.qZA()(),t._UZ(63,"mat-paginator",34)(64,"app-loading-dots",35),t.qZA()),2&i&&(t.xp6(21),t.Q6J("dataSource",r.dataSource),t.xp6(40),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(1),t.Q6J("pageSize",10)("pageSizeOptions",t.DdM(6,st)),t.xp6(1),t.Q6J("isLoading",r.isLoading))},dependencies:[u.mk,u.O5,v.l,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,p.NW,m.YE,m.nU,T.Hw,E.RK,f.KE,f.hX,Z.gD,L.ey,x.Nt],styles:[".text-green[_ngcontent-%COMP%]{color:green}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:1}50%{opacity:.5}to{opacity:1}}.pulsating-text[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1.5s infinite}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.rotating-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotate 2s linear infinite}"]})}return e})();const lt=[{path:"",component:(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-order"]],decls:1,vars:0,template:function(i,r){1&i&&t._UZ(0,"app-list-order")},dependencies:[dt]})}return e})()}];let ut=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[C.Bz.forChild(lt),C.Bz]})}return e})();var mt=a(8308),pt=a(5986),ht=a(6385),ft=a(9038),gt=a(4104),Ct=a(5195),_t=a(5940),Tt=a(9014);let Et=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({providers:[u.uU],imports:[u.ez,ut,mt.m,d.p0,p.TU,m.JX,T.Ps,E.ot,f.lN,Z.LD,x.c,pt.p9,_.Is,ht.t,ft.ie,gt.Nh,Ct.QW,_t.Cq,Tt.g]})}return e})()}}]);