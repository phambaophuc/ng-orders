"use strict";(self.webpackChunkmanage_shop=self.webpackChunkmanage_shop||[]).push([[53],{3053:(ut,C,a)=>{a.r(C),a.d(C,{InvoiceModule:()=>dt,MY_DATE_FORMATS:()=>M});var D=a(6814),T=a(4190),p=a(3365),d=a(3566),l=a(5313),Y=a(5246),t=a(5879),y=a(872),E=a(4300),S=a(9275),N=a(1387),x=a(7700),Z=a(1175),f=a(2296),m=a(4170),_=a(2032),A=a(5195),u=a(8034),h=a(7466),g=a(6223),U=a(4321);function J(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"mat-form-field")(1,"mat-label"),t._uU(2,"Ch\u1ecdn ng\xe0y"),t.qZA(),t.TgZ(3,"input",27),t.NdJ("ngModelChange",function(i){t.CHM(n);const s=t.oxw();return t.KtG(s.date=i)})("dateChange",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.filterDateChange())}),t.qZA(),t._UZ(4,"mat-datepicker-toggle",28)(5,"mat-datepicker",null,29),t.qZA()}if(2&e){const n=t.MAs(6),o=t.oxw();t.xp6(3),t.Q6J("matDatepicker",n)("ngModel",o.date),t.xp6(1),t.Q6J("for",n)}}function Q(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"div")(1,"mat-form-field",30)(2,"mat-label"),t._uU(3,"Start Date:"),t.qZA(),t.TgZ(4,"input",27),t.NdJ("ngModelChange",function(i){t.CHM(n);const s=t.oxw();return t.KtG(s.startDate=i)})("dateChange",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.filterDateRangeChange())}),t.qZA(),t._UZ(5,"mat-datepicker-toggle",28)(6,"mat-datepicker",null,29),t.qZA(),t.TgZ(8,"mat-form-field")(9,"mat-label"),t._uU(10,"End Date:"),t.qZA(),t.TgZ(11,"input",27),t.NdJ("ngModelChange",function(i){t.CHM(n);const s=t.oxw();return t.KtG(s.endDate=i)})("dateChange",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.filterDateRangeChange())}),t.qZA(),t._UZ(12,"mat-datepicker-toggle",28)(13,"mat-datepicker",null,31),t.qZA()()}if(2&e){const n=t.MAs(7),o=t.MAs(14),i=t.oxw();t.xp6(4),t.Q6J("matDatepicker",n)("ngModel",i.startDate),t.xp6(1),t.Q6J("for",n),t.xp6(6),t.Q6J("matDatepicker",o)("ngModel",i.endDate),t.xp6(1),t.Q6J("for",o)}}function B(e,c){1&e&&(t.TgZ(0,"th",32),t._uU(1," M\xe3 "),t.qZA())}function F(e,c){if(1&e&&(t.TgZ(0,"td",33),t._uU(1),t.qZA()),2&e){const n=c.$implicit;t.xp6(1),t.hij(" ",n.key," ")}}function R(e,c){1&e&&(t.TgZ(0,"th",32),t._uU(1," Kh\xe1ch h\xe0ng "),t.qZA())}function w(e,c){if(1&e&&(t.TgZ(0,"td",33),t._uU(1),t.qZA()),2&e){const n=c.$implicit;t.xp6(1),t.hij(" ",n.name," ")}}function H(e,c){1&e&&(t.TgZ(0,"th",32),t._uU(1," S\u0110T "),t.qZA())}function G(e,c){if(1&e&&(t.TgZ(0,"td",33),t._uU(1),t.qZA()),2&e){const n=c.$implicit;t.xp6(1),t.hij(" ",n.phoneNumber," ")}}function K(e,c){1&e&&(t.TgZ(0,"th",32),t._uU(1," \u0110\u1ecba ch\u1ec9 "),t.qZA())}function j(e,c){if(1&e&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&e){const n=c.$implicit;t.s9C("title",n.address),t.xp6(1),t.hij(" ",n.address," ")}}function O(e,c){1&e&&(t.TgZ(0,"th",32),t._uU(1," Ng\xe0y t\u1ea1o "),t.qZA())}function k(e,c){if(1&e&&(t.TgZ(0,"td",33),t._uU(1),t.qZA()),2&e){const n=c.$implicit;t.xp6(1),t.hij(" ",n.createdDate," ")}}function z(e,c){1&e&&(t.TgZ(0,"th",32),t._uU(1," T\u1ed5ng ti\u1ec1n "),t.qZA())}function b(e,c){if(1&e&&(t.TgZ(0,"td",33),t._uU(1),t.qZA()),2&e){const n=c.$implicit;t.xp6(1),t.hij(" ",n.totalPrice," ")}}function $(e,c){1&e&&(t.TgZ(0,"th",35),t._uU(1,"Chi ti\u1ebft"),t.qZA())}function P(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"td",36)(1,"button",37),t.NdJ("click",function(){const s=t.CHM(n).$implicit,r=t.oxw();return t.KtG(r.openOrderDetails(s))}),t.TgZ(2,"mat-icon"),t._uU(3,"visibility"),t.qZA()()()}}function X(e,c){1&e&&t._UZ(0,"tr",38)}function W(e,c){1&e&&t._UZ(0,"tr",39)}const q=function(){return[5,10,20,50]},V=[{path:"",component:(()=>{class e{constructor(n,o,i,s,r){this.authService=n,this._liveAnnouncer=o,this.invoiceService=i,this.excelService=s,this.dialog=r,this.displayedColumns=["key","name","phone","address","totalPrice","createdDate","details"],this.invoices=[],this.isLoading=!1,this.endDate=new Date,this.filterType="date",this.textFilter=""}ngOnInit(){this.getAllInvoices()}exportToExcel(){this.excelService.exportInvoiceToExcel(this.invoices,"invoices")}getAllInvoices(){this.isLoading=!0,this.authService.getCurrentUser().subscribe(n=>{this.invoiceService.getInvoicesByShopId(n.shopId).subscribe(o=>{this.invoices=o,this.dataSource=new l.by(o),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.isLoading=!1})})}openOrderDetails(n){this.dialog.open(Y.o,{data:n})}announceSortChange(n){this._liveAnnouncer.announce(n.direction?`Sorted ${n.direction}ending`:"Sorting cleared")}filterChange(n){this.dataSource.filter=n.target.value.trim().toLowerCase()}filterDateChange(){const n=new Date(this.date),o=this.invoiceService.formatDate(n);this.dataSource.filter=o}filterDateRangeChange(){const n=new Date(this.startDate),o=new Date(this.endDate);this.dataSource.filterPredicate=(i,s)=>{const r=new Date(i.createdDate),mt=this.invoiceService.formatDate(r),v=new Date(mt),L=new Date(v.getFullYear(),v.getMonth(),v.getDate());return L>=n&&L<=o},this.dataSource.filter="custom"}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(y.e),t.Y36(E.Kd),t.Y36(S.q),t.Y36(N.x),t.Y36(x.uw))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-list-invoice"]],viewQuery:function(o,i){if(1&o&&(t.Gf(p.NW,5),t.Gf(d.YE,5)),2&o){let s;t.iGM(s=t.CRH())&&(i.paginator=s.first),t.iGM(s=t.CRH())&&(i.sort=s.first)}},decls:46,vars:10,consts:[[1,"mt-4"],[1,"d-flex","justify-content-between"],[1,"mb-2"],[3,"ngModel","ngModelChange"],["value","date"],["value","dateRange"],[4,"ngIf"],["mat-button","","color","primary",1,"float-end",3,"click"],["matInput","","placeholder","Nh\u1eadp d\u1eef li\u1ec7u c\u1ea7n t\xecm ...",3,"keyup"],[1,"table-responsive","mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource","matSortChange"],["matColumnDef","key"],["mat-header-cell","","mat-sort-header","","class","fw-bold",4,"matHeaderCellDef"],["mat-cell","","class","text-truncate",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","phone"],["matColumnDef","address"],["mat-cell","","class","text-truncate",3,"title",4,"matCellDef"],["matColumnDef","createdDate"],["matColumnDef","totalPrice"],["matColumnDef","details"],["mat-header-cell","","class","fw-bold",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSize","pageSizeOptions"],[3,"isLoading"],["matInput","",3,"matDatepicker","ngModel","ngModelChange","dateChange"],["matSuffix","",3,"for"],["startDatePicker",""],[1,"me-2"],["endDatePicker",""],["mat-header-cell","","mat-sort-header","",1,"fw-bold"],["mat-cell","",1,"text-truncate"],["mat-cell","",1,"text-truncate",3,"title"],["mat-header-cell","",1,"fw-bold"],["mat-cell",""],["mat-icon-button","","color","primary","title","Xem chi ti\u1ebft \u0111\u01a1n h\xe0ng",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"mat-radio-group",3),t.NdJ("ngModelChange",function(r){return i.filterType=r}),t.TgZ(5,"mat-radio-button",4),t._uU(6,"L\u1ecdc theo ng\xe0y c\u1ee5 th\u1ec3"),t.qZA(),t.TgZ(7,"mat-radio-button",5),t._uU(8,"L\u1ecdc theo kho\u1ea3ng ng\xe0y"),t.qZA()()(),t.YNc(9,J,7,3,"mat-form-field",6),t.YNc(10,Q,15,6,"div",6),t.qZA(),t.TgZ(11,"div")(12,"button",7),t.NdJ("click",function(){return i.exportToExcel()}),t.TgZ(13,"mat-icon"),t._uU(14,"file_download"),t.qZA(),t._uU(15," Export to Excel "),t.qZA(),t.TgZ(16,"mat-card-header")(17,"mat-form-field")(18,"input",8),t.NdJ("keyup",function(r){return i.filterChange(r)}),t.qZA()()()()(),t.TgZ(19,"div",9)(20,"table",10),t.NdJ("matSortChange",function(r){return i.announceSortChange(r)}),t.ynx(21,11),t.YNc(22,B,2,0,"th",12),t.YNc(23,F,2,1,"td",13),t.BQk(),t.ynx(24,14),t.YNc(25,R,2,0,"th",12),t.YNc(26,w,2,1,"td",13),t.BQk(),t.ynx(27,15),t.YNc(28,H,2,0,"th",12),t.YNc(29,G,2,1,"td",13),t.BQk(),t.ynx(30,16),t.YNc(31,K,2,0,"th",12),t.YNc(32,j,2,2,"td",17),t.BQk(),t.ynx(33,18),t.YNc(34,O,2,0,"th",12),t.YNc(35,k,2,1,"td",13),t.BQk(),t.ynx(36,19),t.YNc(37,z,2,0,"th",12),t.YNc(38,b,2,1,"td",13),t.BQk(),t.ynx(39,20),t.YNc(40,$,2,0,"th",21),t.YNc(41,P,4,0,"td",22),t.BQk(),t.YNc(42,X,1,0,"tr",23),t.YNc(43,W,1,0,"tr",24),t.qZA()(),t._UZ(44,"mat-paginator",25)(45,"app-loading-dots",26),t.qZA()),2&o&&(t.xp6(4),t.Q6J("ngModel",i.filterType),t.xp6(5),t.Q6J("ngIf","date"===i.filterType),t.xp6(1),t.Q6J("ngIf","dateRange"===i.filterType),t.xp6(10),t.Q6J("dataSource",i.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("pageSize",10)("pageSizeOptions",t.DdM(9,q)),t.xp6(1),t.Q6J("isLoading",i.isLoading))},dependencies:[D.O5,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,p.NW,d.YE,d.nU,Z.Hw,f.lW,f.RK,m.KE,m.hX,m.R9,_.Nt,A.dk,u.Mq,u.hl,u.nW,h.VQ,h.U0,g.Fj,g.JJ,g.On,U.l]})}return e})()}];let tt=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[T.Bz.forChild(V),T.Bz]})}return e})();var et=a(8525),nt=a(5986),ot=a(6385),it=a(9038),at=a(4104),ct=a(5940),st=a(9014),lt=a(8308),I=a(3680),rt=a(3445);const M={parse:{dateInput:"DD/MM/YYYY"},display:{dateInput:"DD/MM/YYYY",monthYearLabel:"MMMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};let dt=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({providers:[{provide:I.sG,useValue:M}],imports:[D.ez,tt,l.p0,p.TU,d.JX,Z.Ps,f.ot,m.lN,et.LD,_.c,nt.p9,x.Is,ot.t,it.ie,at.Nh,A.QW,ct.Cq,st.g,u.FA,I.XK,rt.bg,h.Fk,lt.m]})}return e})()}}]);