"use strict";(self.webpackChunkmanage_shop=self.webpackChunkmanage_shop||[]).push([[373],{373:(xt,f,a)=>{a.r(f),a.d(f,{OrderModule:()=>Ct});var u=a(6814),g=a(4190),t=a(5879),p=a(3365),m=a(3566),d=a(5313),T=a(5246),s=a(3373),h=function(e){return e.CASH="CASH",e.ONLINE="ONLINE",e}(h||{}),O=a(3601),E=a(872),Z=a(4300),C=a(7700),D=a(3942),y=a(4321),_=a(1175),x=a(2296);function N(e,o){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Chi ti\u1ebft"),t.qZA())}function L(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"td",26)(1,"button",27),t.NdJ("click",function(){const c=t.CHM(n).$implicit,l=t.oxw();return t.KtG(l.openOrderDetails(c))}),t.TgZ(2,"mat-icon"),t._uU(3,"visibility"),t.qZA()()()}}function v(e,o){1&e&&(t.TgZ(0,"th",28),t._uU(1," Kh\xe1ch h\xe0ng "),t.qZA())}function A(e,o){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.name," ")}}function S(e,o){1&e&&(t.TgZ(0,"th",28),t._uU(1," S\u0110T "),t.qZA())}function U(e,o){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.phoneNumber," ")}}function Y(e,o){1&e&&(t.TgZ(0,"th",30),t._uU(1," \u0110\u1ecba ch\u1ec9 "),t.qZA())}function B(e,o){if(1&e&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.s9C("title",n.address),t.xp6(1),t.hij(" ",n.address," ")}}function b(e,o){1&e&&(t.TgZ(0,"th",28),t._uU(1," Ng\xe0y \u0111\u1eb7t "),t.qZA())}function I(e,o){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.dateScheduled," ")}}function Q(e,o){1&e&&(t.TgZ(0,"th",28),t._uU(1," T/G \u0111\u1eb7t "),t.qZA())}function M(e,o){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.timeScheduled," ")}}function k(e,o){1&e&&(t.TgZ(0,"th",28),t._uU(1," Ph\u01b0\u01a1ng th\u1ee9c giao "),t.qZA())}function w(e,o){if(1&e&&(t.TgZ(0,"td",29),t._UZ(1,"i",32),t._uU(2),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Q6J("ngClass",n.isScheduled?"fas fa-calendar":"fas fa-truck"),t.xp6(1),t.hij(" ",n.isScheduled?"H\u1eb9n tr\u01b0\u1edbc":"Giao ngay"," ")}}function H(e,o){1&e&&(t.TgZ(0,"th",28),t._uU(1," Thanh to\xe1n "),t.qZA())}function J(e,o){if(1&e&&(t.TgZ(0,"td",29),t._UZ(1,"i",33),t._uU(2),t.qZA()),2&e){const n=o.$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngClass",i.getPaymentIcon(n.paymentMethod)),t.xp6(1),t.hij(" ",n.paymentMethod," ")}}function P(e,o){1&e&&(t.TgZ(0,"th",28),t._uU(1," Tr\u1ea1ng th\xe1i "),t.qZA())}function G(e,o){if(1&e&&(t.TgZ(0,"td",29)(1,"span",34),t._UZ(2,"i",33),t._uU(3),t.qZA()()),2&e){const n=o.$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngClass",i.getStatusClass(n.status)),t.xp6(1),t.Q6J("ngClass",i.getStatusIcon(n.status)),t.xp6(1),t.hij(" ",n.status," ")}}function $(e,o){1&e&&(t.TgZ(0,"th",28),t._uU(1," T/G x\xe1c nh\u1eadn "),t.qZA())}function q(e,o){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.acceptedTime?n.acceptedTime:"Ch\u01b0a x\xe1c nh\u1eadn"," ")}}function j(e,o){1&e&&(t.TgZ(0,"th",28),t._uU(1," Ng\xe0y x\xe1c nh\u1eadn "),t.qZA())}function F(e,o){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.acceptedDate?n.acceptedDate:"Ch\u01b0a x\xe1c nh\u1eadn"," ")}}function R(e,o){1&e&&(t.TgZ(0,"th",25),t._uU(1,"X\xe1c nh\u1eadn"),t.qZA())}function z(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){t.CHM(n);const r=t.oxw().$implicit,c=t.oxw();return t.KtG(c.acceptOrder(r))}),t.TgZ(1,"mat-icon"),t._uU(2,"done"),t.qZA()()}}function X(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"button",39),t.NdJ("click",function(){t.CHM(n);const r=t.oxw().$implicit,c=t.oxw();return t.KtG(c.deliveringOrder(r))}),t.TgZ(1,"mat-icon"),t._uU(2,"local_shipping"),t.qZA()()}}function K(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(n);const r=t.oxw().$implicit,c=t.oxw();return t.KtG(c.deniedOrder(r))}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}const V=function(){return["denied","completed"]};function W(e,o){if(1&e&&(t.TgZ(0,"td",29),t.YNc(1,z,3,0,"button",35),t.YNc(2,X,3,0,"button",36),t.YNc(3,K,3,0,"button",37),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Q6J("ngIf","pending"===n.status.toLowerCase()),t.xp6(1),t.Q6J("ngIf","accepted"===n.status.toLowerCase()),t.xp6(1),t.Q6J("ngIf",!t.DdM(3,V).includes(n.status.toLowerCase()))}}function tt(e,o){1&e&&t._UZ(0,"tr",41)}function et(e,o){1&e&&t._UZ(0,"tr",42)}const nt=function(){return[5,10,20,50]};let ot=(()=>{class e{constructor(n,i,r,c,l,_t){this.orderService=n,this.authService=i,this._liveAnnouncer=r,this.dialog=c,this.snackbar=l,this.datePipe=_t,this.displayedColumns=["actions","name","phone","address","dateScheduled","timeScheduled","isScheduled","payment","status","acceptedTime","acceptedDate","accept"],this.orders=[],this.isLoading=!1}ngOnInit(){this.getOrders()}getOrders(){this.isLoading=!0,this.authService.getCurrentUser().subscribe(n=>{this.orderService.getOrdersByShopId(n.shopId).subscribe(i=>{this.dataSource=new d.by(i),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.isLoading=!1})})}openOrderDetails(n){this.dialog.open(T.o,{data:n})}announceSortChange(n){this._liveAnnouncer.announce(n.direction?`Sorted ${n.direction}ending`:"Sorting cleared")}acceptOrder(n){n.status=s.q.ACCEPTED;const i=this.datePipe.transform(new Date,"HH:mm"),r=this.datePipe.transform(new Date,"dd/MM/yyyy");n.acceptedTime=i,n.acceptedDate=r,this.orderService.updateOrder(n.key,n).then(()=>{this.snackbar.openSnackBar("\u0110\xe3 x\xe1c nh\u1eadn \u0111\u01a1n h\xe0ng.")}).catch(c=>{console.error(c)})}deniedOrder(n){n.status=s.q.DENIED,this.orderService.updateOrder(n.key,n).then(()=>{this.snackbar.openSnackBar("\u0110\u01a1n h\xe0ng \u0111\xe3 b\u1ecb hu\u1ef7.","DONE")}).catch(i=>{console.error(i)})}deliveringOrder(n){n.status=s.q.DELIVERING,this.orderService.updateOrder(n.key,n).then(()=>{this.snackbar.openSnackBar("\u0110\u01a1n h\xe0ng \u0111\xe3 \u0111\u01b0\u1ee3c giao!","DONE")}).catch(i=>{console.error(i)})}getStatusClass(n){switch(n){case s.q.PENDING:return"text-info";case s.q.ACCEPTED:return"text-primary";case s.q.DENIED:return"text-danger";case s.q.DELIVERING:return"text-warning pulsating-text";case s.q.COMPLETED:return"text-green";default:return""}}getStatusIcon(n){switch(n){case s.q.PENDING:return"fa-hourglass-half rotating-icon";case s.q.ACCEPTED:return"fa-check-circle";case s.q.DENIED:return"fa-times-circle";case s.q.DELIVERING:return"fa-truck";case s.q.COMPLETED:return"fa-check";default:return""}}getPaymentIcon(n){switch(n){case h.CASH:return"fa-money-bill";case h.ONLINE:return"fa-credit-card";default:return""}}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(O.p),t.Y36(E.e),t.Y36(Z.Kd),t.Y36(C.uw),t.Y36(D.c),t.Y36(u.uU))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-list-order"]],viewQuery:function(i,r){if(1&i&&(t.Gf(p.NW,5),t.Gf(m.YE,5)),2&i){let c;t.iGM(c=t.CRH())&&(r.paginator=c.first),t.iGM(c=t.CRH())&&(r.sort=c.first)}},decls:43,vars:7,consts:[[1,"mt-4"],[1,"table-responsive","mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource","matSortChange"],["matColumnDef","actions"],["mat-header-cell","","class","fw-bold",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","","class","fw-bold","style","max-width: fit-content;",4,"matHeaderCellDef"],["mat-cell","","class","text-truncate",4,"matCellDef"],["matColumnDef","phone"],["matColumnDef","address"],["mat-header-cell","","mat-sort-header","","class","fw-bold",4,"matHeaderCellDef"],["mat-cell","","class","text-truncate","style","max-width: 200px;",3,"title",4,"matCellDef"],["matColumnDef","dateScheduled"],["matColumnDef","timeScheduled"],["matColumnDef","isScheduled"],["matColumnDef","payment"],["matColumnDef","status"],["matColumnDef","acceptedTime"],["matColumnDef","acceptedDate"],["matColumnDef","accept"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSize","pageSizeOptions"],[3,"isLoading"],["mat-header-cell","",1,"fw-bold"],["mat-cell",""],["mat-icon-button","","color","primary","title","Xem chi ti\u1ebft \u0111\u01a1n h\xe0ng",3,"click"],["mat-header-cell","","mat-sort-header","",1,"fw-bold",2,"max-width","fit-content"],["mat-cell","",1,"text-truncate"],["mat-header-cell","","mat-sort-header","",1,"fw-bold"],["mat-cell","",1,"text-truncate",2,"max-width","200px",3,"title"],[1,"me-1",3,"ngClass"],[1,"me-1","fas",3,"ngClass"],[3,"ngClass"],["mat-icon-button","","color","primary","title","X\xe1c nh\u1eadn \u0111\u01a1n h\xe0ng",3,"click",4,"ngIf"],["mat-icon-button","","color","primary","title","Giao h\xe0ng",3,"click",4,"ngIf"],["mat-icon-button","","color","warn","title","Hu\u1ef7 \u0111\u01a1n h\xe0ng",3,"click",4,"ngIf"],["mat-icon-button","","color","primary","title","X\xe1c nh\u1eadn \u0111\u01a1n h\xe0ng",3,"click"],["mat-icon-button","","color","primary","title","Giao h\xe0ng",3,"click"],["mat-icon-button","","color","warn","title","Hu\u1ef7 \u0111\u01a1n h\xe0ng",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,r){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"table",2),t.NdJ("matSortChange",function(l){return r.announceSortChange(l)}),t.ynx(3,3),t.YNc(4,N,2,0,"th",4),t.YNc(5,L,4,0,"td",5),t.BQk(),t.ynx(6,6),t.YNc(7,v,2,0,"th",7),t.YNc(8,A,2,1,"td",8),t.BQk(),t.ynx(9,9),t.YNc(10,S,2,0,"th",7),t.YNc(11,U,2,1,"td",8),t.BQk(),t.ynx(12,10),t.YNc(13,Y,2,0,"th",11),t.YNc(14,B,2,2,"td",12),t.BQk(),t.ynx(15,13),t.YNc(16,b,2,0,"th",7),t.YNc(17,I,2,1,"td",8),t.BQk(),t.ynx(18,14),t.YNc(19,Q,2,0,"th",7),t.YNc(20,M,2,1,"td",8),t.BQk(),t.ynx(21,15),t.YNc(22,k,2,0,"th",7),t.YNc(23,w,3,2,"td",8),t.BQk(),t.ynx(24,16),t.YNc(25,H,2,0,"th",7),t.YNc(26,J,3,2,"td",8),t.BQk(),t.ynx(27,17),t.YNc(28,P,2,0,"th",7),t.YNc(29,G,4,3,"td",8),t.BQk(),t.ynx(30,18),t.YNc(31,$,2,0,"th",7),t.YNc(32,q,2,1,"td",8),t.BQk(),t.ynx(33,19),t.YNc(34,j,2,0,"th",7),t.YNc(35,F,2,1,"td",8),t.BQk(),t.ynx(36,20),t.YNc(37,R,2,0,"th",4),t.YNc(38,W,4,4,"td",8),t.BQk(),t.YNc(39,tt,1,0,"tr",21),t.YNc(40,et,1,0,"tr",22),t.qZA()(),t._UZ(41,"mat-paginator",23)(42,"app-loading-dots",24),t.qZA()),2&i&&(t.xp6(2),t.Q6J("dataSource",r.dataSource),t.xp6(37),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(1),t.Q6J("pageSize",10)("pageSizeOptions",t.DdM(6,nt)),t.xp6(1),t.Q6J("isLoading",r.isLoading))},dependencies:[u.mk,u.O5,y.l,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,p.NW,m.YE,m.nU,_.Hw,x.RK],styles:[".text-green[_ngcontent-%COMP%]{color:green}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:1}50%{opacity:.5}to{opacity:1}}.pulsating-text[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1.5s infinite}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.rotating-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotate 2s linear infinite}"]})}return e})();const it=[{path:"",component:(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-order"]],decls:1,vars:0,template:function(i,r){1&i&&t._UZ(0,"app-list-order")},dependencies:[ot]})}return e})()}];let at=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[g.Bz.forChild(it),g.Bz]})}return e})();var rt=a(8308),ct=a(4170),st=a(8525),dt=a(2032),ut=a(5986),lt=a(6385),mt=a(9038),pt=a(4104),ht=a(5195),ft=a(5940),gt=a(9014);let Ct=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({providers:[u.uU],imports:[u.ez,at,rt.m,d.p0,p.TU,m.JX,_.Ps,x.ot,ct.lN,st.LD,dt.c,ut.p9,C.Is,lt.t,mt.ie,pt.Nh,ht.QW,ft.Cq,gt.g]})}return e})()}}]);